<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h1>Call back and array method</h1>
</body>
<script>
    // **************************forEach()********************************************************
    // const numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];
    // function print(element){
    //     console.log(element);
    // }
    // numbers.forEach(print); //we pass print function as a callback to forEach method

    //or we can use an anonymous function in forEach method
//     numbers.forEach(function(element){
//         console.log(element);
//     });
// // or we can use for of as well
//     for(let el of numbers){
//         console.log(el);
//     }

// numbers.forEach(function(el){
//     if(el % 2 === 0){
//         console.log(el)
//     }
// })

    // const movies = [
    //     {
    //         title: "Inception",
    //         rating: 8.8,
    //         hasWatched: true
    //     },
    //     {
    //         title: "Interstellar",
    //         rating: 8.6,
    //         hasWatched: false
    //     },
    //     {
    //         title: "The Dark Knight",
    //         rating: 9.0,
    //         hasWatched: true
    //     },
    //     {
    //         title: "The Matrix",
    //         rating: 8.7,
    //         hasWatched: false
    //     }
    // ]

    // movies.forEach(function(movie){
    //     console.log(`${movie.title} - ${movie.rating} - ${movie.hasWatched ? "watched" : "not watched"}`);
    // })






    // **************************map()********************************************************
    // what map do is it takes an array and returns a new array with the same number of elements
    // but with the values transformed by the function we pass to it
    // const numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];
    // const doubles = numbers.map(function(num){
    //     return num * 2;
    // })
    // console.log(doubles);
    // const movies = [
    //     {
    //         title: "Inception",
    //         rating: 8.8,
    //         hasWatched: true
    //     },
    //     {
    //         title: "Interstellar",
    //         rating: 8.6,
    //         hasWatched: false
    //     },
    //     {
    //         title: "The Dark Knight",
    //         rating: 9.0,
    //         hasWatched: true
    //     },
    //     {
    //         title: "The Matrix",
    //         rating: 8.7,
    //         hasWatched: false
    //     }
    // ]
    // const titles = movies.map(function(movie){
        //     return movie.title.toUpperCase();
    // })
    // console.log(titles);
    
    
    




    // **************************************arrow functions*****************************************
    // typical function
    // const add = function(x, y){
        //     return x + y;
        // }
        // function add(x, y){
    //     return x + y;
    // }
    // arrow function canot be written on its own, we have to catch it in a variable
    // (x, y)  => {
        //     return x + y;
        // } //syntax error
        // const add = (x, y) => {
    //     return x + y;
    // }
    // console.log(add(2, 3));
    
    // // const square = (x) => {
        // //     return x*x;
        // // } //for one parameter we can skip the parenthesis
        // const square = num => {
            //     return num*num;
            // } 
            // console.log(square(3));
    
    // const rollDie = () => {
        //     return Math.floor(Math.random() * 6) + 1;
        // }
        // console.log(rollDie());
        
        
        // arrow function implicit return
        // make sure only return statement is there, if there is any other statement like local variable then it is not gonan work. Meeeeh!
        // const rollDie = () => (
            //     Math.floor(Math.random() * 6) + 1
            // ) //for implicit retun we can remove return keyword and also replace curly braces with parenthesis
            // console.log(rollDie());
            
            // const add = (a, b) => a+b //for short return statement we can write in one line also
            
    // **********************************************array function wrap up ******************************************************
    // const movies = [
    //     {
    //         title: "Inception",
    //         score: 8.8,
    //         hasWatched: true
    //     },
    //     {
    //         title: "Interstellar",
    //         score: 8.6,
    //         hasWatched: false
    //     },
    //     {
    //         title: "The Dark Knight",
    //         score: 9.0,
    //         hasWatched: true
    //     },
    //     {
    //         title: "The Matrix",
    //         score: 8.7,
    //         hasWatched: false
    //     }
    // ]

    // const newMovies = movies.map(function(movie){
    //     return `${movie.title} - ${movie.score / 10}`
    // })
     // using arrow function
    // const newMovies = movies.map(movie => {
    //     return `${movie.title} - ${movie.score / 10}`
    // })
    // using implicit return
    // const newMovies = movies.map((movie => 
    //     `${movie.title} - ${movie.score / 10}`
    // ))
    // console.log(newMovies);

    
            

    


    // ***************************************setTimeout() and setInterval()**************************************************
            
    // console.log("HELLO");            
    // setTimeout(() =>{
    //     console.log("are you there ?");            
    // }, 3000)
    // console.log("bye");            

    const id = setInterval(() => {
        console.log(Math.random());
    }, 2000)
    clearInterval(id); //to stop the interval we can use clearInterval method








    // ******************************************filter()********************************************************
    // const numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];
    // numbers.filter(n => {
    //     return n < 6
    // })
    // console.log(numbers.filter(n => { return n < 6}))

    // const movies = [
    //     {
    //         title: "Inception", 
    //         score: 8.8,
    //         year: 2010,
    //     }, 
    //     {
    //         title: "Interstellar", 
    //         score: 8.6,
    //         year: 2014,
    //     }, 
    //     {
    //         title: "The Dark Knight", 
    //         score: 9.0,
    //         year: 2008,
    //     }, 
    //     {
    //         title: "The Matrix", 
    //         score: 7.2,
    //         year: 1999,
    //     }
    // ]

    // const goodMovies = movies.filter(movie => {
    //     return movie.score > 8.5
    // })
    // const goodTitles = movies.map(m => m.title)

    // movies.filter(m => m.score > 8.5).map(m => m.title); //show movie titles with score > 8.5

    // const badMovies = movies.filter(movie => {
    //     return movie.score < 7.5
    // })
    // const recentMovies = movies.filter(movie => {
    //     return movie.year > 2000
    // })
    // console.log(goodMovies);
    // console.log(badMovies);
    // console.log(recentMovies);
    // console.log(goodTitles);







    // ****************************************some() and every()************************************************
    // this returns boolean value truw and false only, the condition is passed to the function
    // const exams = [80, 90, 70, 60, 50, 40, 30, 20, 10]
    // exams.every(score => score >=10) //true, because all scores are greater than 10, if one is < 10 then it will return false
    // exams.some(score => score >= 90) //true, because one score is greater than 90, if none is > 90 then it will return false

    // const movies = [
    //     {
    //         title: "Inception", 
    //         score: 8.8,
    //         year: 2010,
    //     }, 
    //     {
    //         title: "Interstellar", 
    //         score: 8.6,
    //         year: 2014,
    //     }, 
    //     {
    //         title: "The Dark Knight", 
    //         score: 9.0,
    //         year: 2008,
    //     }, 
    //     {
    //         title: "The Matrix", 
    //         score: 7.2,
    //         year: 1999,
    //     }
    // ]

    // movies.some(movie => movie.year > 2015) //false, because no movie is released after 2015
    // movies.some(movie => movie.year > 2000) //true, because some movies are released after 2000







    // *****************************************reduce()*************************************************
    const prices = [9.99, 1.50, 19.99, 5.99, 3.50]
    // let total = 0;
    // for(let price of prices){
    //     total += price
    // }
    // using reduce method
    // const total = prices.reduce((total, price) => {
    //     return total + price //dont need to use += operator like typical foor or forof loop, interestingly we are using + operator
    // }) //we write (total, price). Here total is the accumulator and price is the current value
    // console.log(total);
    
    // const minPrice = prices.reduce((min, price) => {
    //     if(price < min){
    //         return price
    //     }
    //     return min
    // })
    // console.log(minPrice);

    // const movies = [
    //     {
    //         title: "Inception", 
    //         score: 8.8,
    //         year: 2010,
    //     }, 
    //     {
    //         title: "Interstellar", 
    //         score: 8.6,
    //         year: 2014,
    //     }, 
    //     {
    //         title: "The Dark Knight", 
    //         score: 9.0,
    //         year: 2008,
    //     }, 
    //     {
    //         title: "The Matrix", 
    //         score: 7.2,
    //         year: 1999,
    //     }
    // ]

    // const highestRated =  movies.reduce((bestMovie, currMovie) => {
    //     if(currMovie.score > bestMovie.score){
    //         return currMovie //now current movie becomes best movie
    //     }else{
    //         return bestMovie;
    //     }
    // })
    // console.log(highestRated);

    // const evens = [2, 4, 6, 8, 10]
    // const sumEvens = evens.reduce((sum,num) => {
    //     return sum+num
    // }, 100) //sum will be added to 100 and we will get 130, but if we remove 100 then it will be 30
    // console.log(sumEvens);
    
    
    




    // *********************************************arrow functions and this keyword*****************************************
    // The keyword this behave differently in arrow functions and regular functions. In regular functions, this refers to the object that calls the function. In arrow functions, this refers to the object that is defined in the scope where the arrow function is defined.
    // const person = {
    //     firstName: "Viggo", 
    //     lastName: "Mortensen",
    //     fullName: function() {
    //         return `${this.firstName} ${this.lastName}`
    //     },

    //     // replace the above with an arrow fnction, then this will not work even by using this keyword, cause this keyword work within the parent object which is person, but here fullName() refers to the window object
    //     // fullName: () => {
    //     //     return `${this.firstName} ${this.lastName}` //this keyword will not work here because it is not bound to the person object, becaseu it is a part of window object
    //     // },
    //     // shoutName: function(){
    //     //     setTimeout(function() {
    //     //         console.log(this); //this will refer to the window object
    //     //         console.log(this.fullName()) //this will be error becasue fullName() refers to the window object
                
    //     //     }, 3000);
    //     // }
    //     // or we can use arrow function here as well, here shoutName() will refer to the person object, but fullname will show undefined. 
    //     shoutName: function() {
    //         setTimeout(() => {
    //             console.log(this); //this will refer to the window object
    //             console.log(this.fullName()) //this will be error becasue fullName() refers to the window object
    //         }, 3000);
    //     }
    // }
    // // console.log(person.fullName());
    // console.log(person.shoutName());


    // summery of just the above one
    const person = {
        firstName: "Abinash",
        lastName: "Mishra",
        fullName: function () {
            return `${this.firstName} ${this.lastName}`;  // ✅ 'this' refers to 'person'
        },
        shoutName: function () {
            setTimeout(() => {
                console.log(this.fullName());  // ✅ this works because arrow fn inherits 'this' from shoutName
            }, 1000);
        }
    };
    // We want this to refer to person.
    // person.fullName() → calls fullName with this = person ✅
    // person.shoutName() → calls shoutName with this = person ✅

    // ✅ Why We DO Use Arrow Function Inside setTimeout
    // in regular function this is now window, because this function is called by the timer, not person.
    // ✅ this is inherited from shoutName, and shoutName is called by person, so this = person.
    </script>
</html>